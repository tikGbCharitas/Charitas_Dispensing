@model BinOpnameViewModel.PageDetail

@{
    var CommonLocalizer = Factory.Create("Views.Shared.Common", Assembly.GetExecutingAssembly().GetName().Name!);
    var TransactionNo = Model.TransactionNo;
    var DataMode = ViewBag.Mode;
}

<div class="alert alert-danger text-center alert-viewbag-error m-3" role="alert">
    @CommonLocalizer["OnDevelopment"]
</div>

<div>
    <h5>Transaction No: <span id="lblTransactionNo">@TransactionNo</span> </h5>
    <div>
        <form id="filterForm" asp-action="DetailTransaction">
            <input type="hidden" name="TransactionNo" value="@TransactionNo" />
            <label class="form-label fw-bold me-3">Sort: </label>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="filterOption" id="filterItem" value="item" @(Model.SortType == "item" ? "checked" : "")>
                <label class="form-check-label" for="filterItem">Item Name</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="filterOption" id="filterBin" value="bin" @(Model.SortType == "bin" ? "checked" : "")>
                <label class="form-check-label" for="filterBin">Bin Name</label>
            </div>
        </form>
    </div>
    @if (Model?.SortType?.Any() == true)
    {
        @foreach (var item in Model.FilterList)
        {
            <button id="Detail-@item.FilterName" class="badge @(item.isApproved == true ? "bg-success" : "bg-secondary") @(Model.SortID == item.FilterName ? "active" : "")" data-transaction="@TransactionNo" data-sortid="@item.FilterName" data-isapproved="@item.isApproved">
                @item.FilterName
            </button>
        }
    }
</div>
<div id="PageDetail">
    @if (Model?.SortID?.Any() == true)
    {
        @await Html.PartialAsync("_PageDetail")
    }
</div>

@section Styles {
    <style>
        .badge.active {
            border: 2px solid #0d6efd;
            box-shadow: 0 0 5px #0d6efd;
            font-weight: bold;
        }

            .badge.active::after {
                content: ' ✅';
                font-size: 0.9em;
            }
    </style>
}
@section Scripts {
    <script>
        var TransactionPageDetailUrl = '@Url.Action("TransactionPageDetail", "BinOpname")';
        var BinListUrl = '@Url.Action("BinList", "BinOpname")'
        var detailList = '@Html.Raw(JsonSerializer.Serialize(Model?.DetailList))'
        const dataMode = '@ViewBag.Mode'
    </script>
    <script src="@Url.Content("~/js/Pages/BinOpname.js")"></script>
}